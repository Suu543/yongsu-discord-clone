# yongsu-discord-clone

## Setup

- shadcn: https://ui.shadcn.com/docs/installation/next

  - Beautifully designed components that you can copy and paste into your apps. Accessible. Customizable. Open Source.

- Visual Studio Code Extension: Tailwin CSS IntelliSense
- Visual Studio Code Extension: Simple React Snippets

```bash
npx create-next-app@latest discord-clone --typescript --tailwind --eslint
$ npx create-next-app@latest discord-clone --typescript --tailwind --eslint
√ Would you like to use `src/` directory? ... No(v) / Yes
√ Would you like to use App Router? (recommended) ... No / Yes(v)
√ Would you like to customize the default import alias? ... No(v) / Yes

npx shadcn-ui@latest init
√ Would you like to use TypeScript (recommended)? ... no / yes(v)
√ Which style would you like to use? » Default
√ Which color would you like to use as base color? » Stone
√ Where is your global CSS file? ... app/globals.css
√ Would you like to use CSS variables for colors? ... no / yes(v)
√ Where is your tailwind.config.js located? ... tailwind.config.js
√ Configure the import alias for components: ... @/components
√ Configure the import alias for utils: ... @/lib/utils
√ Are you using React Server Components? ... no / yes
√ Write configuration to components.json. Proceed? ... yes
```

```css
/* 다음 코드 추가 */
html,
body,
:root {
  height: 100%;
}
```

```tsx
// app/page.tsx
export default function Home() {
  return (
    <p className="text-3xl font-bold text-indigo-500">Hello Discord Cloe</p>
  );
}
```

```bash
npx shadcn-ui@latest add button
√ Ready to install components and dependencies. Proceed? ... yes

// shadcn-ui-button: components/ui/button.tsx
```

```tsx
// app/page.tsx
import { Button } from "@/components/ui/button";

export default function Home() {
  return (
    <div>
      <p className="text-3xl font-bold text-indigo-500">Hello Discord Clone</p>
      <Button>Click Me</Button>
    </div>
  );
}
```

### Setup: Shadcn UI Custom + utils

```tsx
// components/ui/button.tsx
// ...
variants: {
  variant: {
    // ...
    test: "bg-indigo-500";
  }
}
// ...
```

- Custom 스타일 적용

```tsx
// app/page.tsx
import { Button } from "@/components/ui/button";

export default function Home() {
  return (
    <div>
      <p className="text-3xl font-bold text-indigo-500">Hello Discord Clone</p>
      <Button variant="test" className="bg-indigo-500">
        Click Me
      </Button>
    </div>
  );
}
```

- lib/utils.ts 파일 설명

이 코드는 JavaScript/TypeScript 환경에서 사용되는 유틸리티 함수로 보이며, 주로 CSS 클래스를 동적으로 조작하는 데 사용될 것으로 예상됩니다. 코드의 주요 구성 요소를 설명하겠습니다.

1. `import` 문:

   - `ClassValue`와 `clsx`를 `clsx` 모듈에서 가져옵니다.
   - `twMerge`를 `tailwind-merge` 모듈에서 가져옵니다.

2. `cn` 함수:

   - `cn` 함수는 여러 CSS 클래스를 받아서 조합하고 리턴하는 함수입니다.
   - `...inputs: ClassValue[]` 구문은 함수에 가변 인자를 사용한다는 것을 나타냅니다. 이것은 함수에 여러 개의 인자를 전달할 수 있게 해줍니다.

3. 함수 동작 설명:
   - `clsx` 함수는 `ClassValue`들을 조합하여 하나의 문자열로 반환하는 함수입니다. 이렇게 하면 여러 클래스를 하나의 문자열로 결합할 수 있습니다.
   - `twMerge` 함수는 `tailwind-merge` 모듈에서 가져온 것으로, Tailwind CSS 클래스를 병합하는 데 사용됩니다.

따라서 `cn` 함수는 다음과 같은 작업을 수행합니다:

1. 전달된 모든 인자를 `clsx` 함수로 전달하여 하나의 CSS 클래스 문자열로 결합합니다.
2. 결합된 CSS 클래스 문자열을 `twMerge` 함수로 전달하여 Tailwind CSS 클래스를 병합합니다.
3. 최종적으로 병합된 CSS 클래스 문자열을 반환합니다.

이렇게 하면 코드에서 `cn` 함수를 사용하여 여러 CSS 클래스를 쉽게 결합하고 Tailwind CSS 클래스를 적용할 수 있습니다.

```ts
// lib/utils.ts
import { type ClassValue, clsx } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

```ts
// Ex1: 기본 사용
import React from "react";
import { cn } from "./파일경로";

function MyComponent(props) {
  // 'text-red-500'와 'bg-blue-300' 클래스를 조합하여 새로운 클래스를 생성합니다.
  const combinedClass = cn("text-red-500", "bg-blue-300");

  return <div className={combinedClass}>내 컴포넌트</div>;
}

// Ex2: 조건부 클래스 적용
import React from "react";
import { cn } from "./파일경로";

function MyComponent(props) {
  const isActive = props.active;

  // isActive 값에 따라 다른 클래스를 적용합니다.
  const combinedClass = cn("text-red-500", isActive && "bg-blue-300");

  return <div className={combinedClass}>내 컴포넌트</div>;
}
```

실제 앱에 적용

```tsx
// app/page.tsx
import { Button } from "@/components/ui/button";
import { cn } from "@/lib/utils";

const state = true;

export default function Home() {
  return (
    <div>
      <p className="text-3xl font-bold text-indigo-500">Hello Discord Clone</p>
      <Button className={cn("bg-indigo-500", state && "bg-red-500")}>
        Click Me
      </Button>
    </div>
  );
}
```

### Setup: Font

```tsx
// app/layout.tsx
import "./globals.css";
import type { Metadata } from "next";
import { Open_Sans } from "next/font/google";

const font = Open_Sans({ subsets: ["latin"] });

export const metadata: Metadata = {
  title: "Sucord",
  description: "Generated by create next app",
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body className={font.className}>{children}</body>
    </html>
  );
}
```

## Setup: Routing Example

- Routing: app/folder-name: Yes (Yes Effect)
- Routing: app/(folder-name): No (No Effect)
  - Organizational Folder

## Folder Structure

```bash
app
├── (auth)
│   ├── (routes)
│   │   ├── login
│   │   │   └── page.tsx
│   │   └── register
│   │       └── page.tsx
│   └── layout.tsx
├── (main)
│   └── (routes)
│       └── page.tsx
├── favicon.ico
├── globals.css
└── layout.tsx
```

## Setup Authentication

- Clerk: https://clerk.com/?utm_source=www.google.com&utm_medium=referral&utm_campaign=none

1. Create Application
2. Next.js 선택
3. API Keys 복붙
4. https://clerk.com/docs/quickstarts/nextjs

```bash
.gitignore

# ...
.env
# ...
```

````bash
# .env
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=

```bash
npm install @clerk/nextjs
````

## Setup: Dark & Light Theme Setup

- https://ui.shadcn.com/docs/dark-mode/next

```bash
npm install next-themes
```

## Setup Prisma + PlanetScale

- PlanetScale: https://planetscale.com/

```bash
npm install -D prisma
npx prisma init
```

- PlanetScale 설정 후 ==> env 값 변경
- scheme.prisma 정의 후

```bash
// scheme.prisma 변경할 때마다
npx prisma generate
// planetscale에 반영
npx prisma db push
```

```bash
npm install @prisma/client
```

- lib/db.ts 정의

```ts
// db.ts
import { PrismaClient } from "@prisma/client";

// Hot Reload 마다 PrismaClient Instance 생성을 방지하기 위해서 사용함

declare global {
  var prisma: PrismaClient | undefined;
}

export const db = globalThis.prisma || new PrismaClient();

if (process.env.NODE_ENV !== "production") globalThis.prisma = db;
```

## Setup: Prisma Test

```bash
npx prisma studio
```